<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Forgot Password · Air Quality</title>
    <style>
      body { font-family: system-ui, Arial, sans-serif; margin: 2rem; }
      form { max-width: 420px; padding: 1rem; border: 1px solid #ddd; border-radius: 8px; }
      label { display:block; margin-top: .5rem; }
      input { width: 100%; padding: .5rem; margin-top: .25rem; }
      button { margin-top: 1rem; padding: .5rem .75rem; }
      pre { white-space: pre-wrap; background: #fafafa; padding: .75rem; border: 1px solid #eee; border-radius: 6px; }
      nav a { margin-right: 1rem; }
      .hint { color: #555; font-size: .9rem; }
    </style>
  </head>
  <body>
    <nav>
      <a href="/">Home</a>
      <a href="/login">Login</a>
      <a href="/register">Register</a>
    </nav>
    <h1>Forgot Password</h1>
    <p class="hint">Enter your account email. If an account exists, a reset email will be sent.</p>
    <form id="forgotForm">
      <label>Email</label>
      <input type="email" id="email" placeholder="alice@example.com" required />
      <button type="submit">Send reset email</button>
    </form>

    <h3>Result</h3>
    <pre id="result">—</pre>

    <script>
      const resEl = document.getElementById('result');
      function show(obj) {
        resEl.textContent = typeof obj === 'string' ? obj : JSON.stringify(obj, null, 2);
      }
      async function postJson(url, data) {
        const res = await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        const text = await res.text();
        try { return { status: res.status, json: JSON.parse(text) }; }
        catch { return { status: res.status, text }; }
      }
      document.getElementById('forgotForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const out = await postJson('/api/auth/forgot-password', { email });
        show(out.json || out.text);
      });
    </script>
  </body>
  </html>

